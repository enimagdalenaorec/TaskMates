<div class="container p-2 pr-1">
  <div class="left-content border-round-md mr-2">
    <!-- TabMenu from primeng -->
    <p-tabView>
      <p-tabPanel header="Tasks">
        <div class="tabPanel">
          <!-- add task and filter task -->
          <div class="flex justify-content-end align-items-center mb-4">
            <i (click)="op.toggle($event)" pTooltip="Filter by task status" tooltipPosition="bottom"
              class="pi pi-filter mt-2 mr-3" style="font-size: 1.5rem; color:rgba(43, 139, 118, 0.5);;"></i>
            <p-overlayPanel #op>
              <p class="mb-1 mt-2" (click)="filterTasks('Available')">Available</p>
              <hr>
              <p class="mb-1 mt-2" (click)="filterTasks('Finished')">Finished</p>
              <hr>
              <p class="mb-1 mt-2" (click)="filterTasks('Failed')">Failed</p>
              <hr>
              <p class="mb-1 mt-2" (click)="filterTasks('Full')">Full</p>
              <hr>
              <p class="mt-2" (click)="filterTasks(null)">All</p>
            </p-overlayPanel>
            <p-button label="Add Task" class="mt-2 mr-2" (click)="navigate('add-task')"></p-button>
          </div>
          <!-- display of tasks -->
          <div *ngFor="let task of filteredTasks" [ngClass]="{'task-failed': task.status === 'failed'}"
            class="task-item h-11rem w-30rem m-2 mb-4 border-round-md p-3 pl-4">
            <div class="task-item-left">
              <div>
                <p class="text-2xl mb-2 text-4xl" style="color: rgb(43, 139, 118);">{{task.name}}</p>
                <p class="text-base"><i>{{task.description}}</i></p>
              </div>
              <div>
                <p class="text-lg"><span class="text-sm">Points: </span> {{task.points}} </p>
                <p class="text-lg align-self-end">{{task.members.length}}/{{task.maxCapacity}}</p>
              </div>
            </div>
            <div class="task-item-right">
              <p class="text-4xl mb-3 align-self-end">{{task.icon}}</p>
              <div class="align-self-end">
                <ng-container *ngIf="task.status === 'finished'; else checkDeadline">
                  <p class="text-sm timer finished">Task finished! Click to review</p>
                </ng-container>
                <ng-template #checkDeadline>
                  <ng-container *ngIf="isDeadlinePassed(task.deadline); else showTimer">
                    <p *ngIf="task.status === 'failed'" class="text-sm timer">Task failed!</p>
                  </ng-container>
                  <ng-template #showTimer>
                    <p class="timer">{{timeLeft[task.id].days}}d {{timeLeft[task.id].hours}}h
                      {{timeLeft[task.id].minutes}}m</p>
                  </ng-template>
                </ng-template>
              </div>
            </div>
          </div>
        </div>
      </p-tabPanel>
      <p-tabPanel header="Standings">
        <div class="tabPanel">
        </div>
      </p-tabPanel>
      <p-tabPanel header="Members">
        <div class="tabPanel">
        </div>
      </p-tabPanel>
    </p-tabView>
  </div>
  <div class="right-content border-round-md flex">
    <p class="p-3 text-4xl">{{this.groupName}}</p>
    <div class="mr-3 ml-3 mb-3 border-round-md groupchat">

    </div>
  </div>
</div>
